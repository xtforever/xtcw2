/* Generated by wbuild
 * (generator version 3.3)
 */
#include <X11/IntrinsicP.h>
#include <X11/StringDefs.h>
#line 423 "Wradio.widget"
#include <X11/Xft/Xft.h>
#line 424 "Wradio.widget"
#include <X11/Xmu/Converters.h>
#line 425 "Wradio.widget"
#include "mls.h"
#line 426 "Wradio.widget"
#include "xutil.h"
#line 427 "Wradio.widget"
#include "converters.h"
#line 428 "Wradio.widget"
#include "error.h"
#include <xtcw/WradioP.h>
#line 382 "Wradio.widget"
static void highlight(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 389 "Wradio.widget"
static void reset(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 396 "Wradio.widget"
static void unset(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 402 "Wradio.widget"
static void set(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 411 "Wradio.widget"
static void toggle(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);
#line 416 "Wradio.widget"
static void notify(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);

static XtActionsRec actionsList[] = {
{"highlight", highlight},
{"reset", reset},
{"unset", unset},
{"set", set},
{"toggle", toggle},
{"notify", notify},
};

static char defaultTranslations[] = "\
<Btn1Down>: set() notify() \n\
<LeaveWindow>: reset() \n\
";
static void _resolve_inheritance(
#if NeedFunctionPrototypes
WidgetClass
#endif
);
#line 71 "Wradio.widget"
static void class_initialize(
#if NeedFunctionPrototypes
void
#endif
);
#line 75 "Wradio.widget"
static void initialize(
#if NeedFunctionPrototypes
Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 123 "Wradio.widget"
static int  exec_command(
#if NeedFunctionPrototypes
Widget,int ,int 
#endif
);
#line 135 "Wradio.widget"
static void realize(
#if NeedFunctionPrototypes
Widget,XtValueMask *,XSetWindowAttributes *
#endif
);
#line 144 "Wradio.widget"
static void resize(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 149 "Wradio.widget"
static void destroy(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 160 "Wradio.widget"
static Boolean  set_values(
#if NeedFunctionPrototypes
Widget ,Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 170 "Wradio.widget"
static void expose(
#if NeedFunctionPrototypes
Widget,XEvent *,Region 
#endif
);
#line 189 "Wradio.widget"
static Widget  lookup_widget(
#if NeedFunctionPrototypes
Widget,char *
#endif
);
#line 211 "Wradio.widget"
static void reshape_widget(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 236 "Wradio.widget"
static void default_label_draw(
#if NeedFunctionPrototypes
Widget,void *,void *
#endif
);
#line 281 "Wradio.widget"
static Widget  rgroup_lookup(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 310 "Wradio.widget"
static Widget  rgroups_get_active_widget(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 322 "Wradio.widget"
static void  rgroups_set_active_widget(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 334 "Wradio.widget"
static pix_t * load_pixmap(
#if NeedFunctionPrototypes
Widget,char *
#endif
);
#line 346 "Wradio.widget"
static void unload_pixmap(
#if NeedFunctionPrototypes
Widget,pix_t *
#endif
);
#line 355 "Wradio.widget"
static int  load_pix(
#if NeedFunctionPrototypes
Widget,char *,pix_t *
#endif
);
#line 189 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 189 "Wradio.widget"
static Widget  lookup_widget(Widget self,char * name)
#else
#line 189 "Wradio.widget"
static Widget  lookup_widget(self,name)Widget self;char * name;
#endif
#line 190 "Wradio.widget"
{
    int numKids, child;
    Widget    *wl, parent, ref;
    ref=self;
    while( (parent = XtParent( ref )) )
	{
	    if ( XtIsComposite( parent ) ) {
		CompositeWidget cw = (CompositeWidget)parent;
		wl = cw->composite.children;
		child = 0;
		numKids = cw->composite.num_children;
		while( child < numKids ) {
		    if( strcmp( XtName( wl[child] ), name ) == 0 ) return wl[child];
		    child++;
		}
	    }
	    ref=parent;
	}
    return 0;
}
#line 211 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 211 "Wradio.widget"
static void reshape_widget(Widget self)
#else
#line 211 "Wradio.widget"
static void reshape_widget(self)Widget self;
#endif
#line 212 "Wradio.widget"
{
	int w;
	if( ((WradioWidget)self)->wradio.cornerRoundPercent >0 && ((WradioWidget)self)->wradio.cornerRoundPercent < 100 ) {
	    w = Min(((WradioWidget)self)->core.height,((WradioWidget)self)->core.width);
	    w = w * ((WradioWidget)self)->wradio.cornerRoundPercent / 100;
	    XmuReshapeWidget( self, XmuShapeRoundedRectangle, w, w );
	}

        if( ((WradioWidget)self)->wradio.pix ) {
            pix_t *p = ((WradioWidget)self)->wradio.pix;
	    /* initialise pixmap position and mask */
               /* center pixmap */
            p->pm_rect.x  = (((WradioWidget)self)->core.width - p->pm_rect.width) / 2;
            p->pm_rect.y  = (((WradioWidget)self)->core.height - p->pm_rect.height) / 2;
               /* create mask for transparent background */

            if( ((WradioWidget)self)->wradio.pix_gc ) {
      	        XSetClipMask(XtDisplay(self), ((WradioWidget)self)->wradio.pix_gc,  p->mask);
      	        XSetClipOrigin(XtDisplay(self), ((WradioWidget)self)->wradio.pix_gc,
                               p->pm_rect.x, p->pm_rect.y );
            }
        }
}
#line 236 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 236 "Wradio.widget"
static void default_label_draw(Widget self,void * a,void * b)
#else
#line 236 "Wradio.widget"
static void default_label_draw(self,a,b)Widget self;void * a;void * b;
#endif
#line 237 "Wradio.widget"
{
  int x,y;
  XRectangle rect;

  char *s = ((WradioWidget)self)->wradio.label;
  Display *dpy = XtDisplay(self);

  wheel_state st = ((WradioWidget)self)->wheel.state;
  if( ((WradioWidget)self)->wradio.active && st == STATE_NORMAL ) st = STATE_ARMED;

  if( ((WradioWidget)self)->wradio.active )
       XSetWindowBorder( dpy, XtWindow(self), ((WradioWidget)self)->wradio.borderColAct );
  else XSetWindowBorder( dpy, XtWindow(self), ((WradioWidget)self)->wradio.borderColNorm );

  if( ((WradioWidget)self)->wradio.pix ) {
        pix_t *p = ((WradioWidget)self)->wradio.pix;
	XCopyArea(dpy, p->map, XtWindow(self), ((WradioWidget)self)->wradio.pix_gc,
	          0, 0, p->pm_rect.width, p->pm_rect.height,
   	      	  p->pm_rect.x, p->pm_rect.y );
        return;
  }


  /* falls es keine Pixmap gibt verwende |label| und setze */
  /* die Hintergrundfarbe passend zum aktuellen Zusatand */
  XFillRectangle( dpy, XtWindow(self), ((WradioWidget)self)->wheel.gc[st], 0,0, ((WradioWidget)self)->core.width, ((WradioWidget)self)->core.height );

  if( s && *s ) {

    y = (((WradioWidget)self)->core.height - ((WradioWidget)self)->wheel.xftFont->height)/2;
    x = (((WradioWidget)self)->core.width - ((WradioWidget)self)->wradio.label_width) /2;
    rect.x = 0; rect.y=0; rect.width=((WradioWidget)self)->core.width; rect.height=((WradioWidget)self)->core.height;
    XftDrawSetClipRectangles( ((WradioWidget)self)->wradio.draw,0,0,&rect, 1);
    XftDrawStringUtf8(((WradioWidget)self)->wradio.draw,((WradioWidget)self)->wheel.xft_col + st, ((WradioWidget)self)->wheel.xftFont,
    			     x,y+((WradioWidget)self)->wheel.xftFont->ascent, (FcChar8*)s, strlen(s) );
    XftDrawSetClip(((WradioWidget)self)->wradio.draw,0);

  }
}
#line 281 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 281 "Wradio.widget"
static Widget  rgroup_lookup(Widget self)
#else
#line 281 "Wradio.widget"
static Widget  rgroup_lookup(self)Widget self;
#endif
#line 282 "Wradio.widget"
{
    int p;
    if( !((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups )
    {
		((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups = m_create(5,sizeof(radio_group_t));
		printf("Group created:%d,%s\n", ((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups, ((WradioWidget)self)->wradio.radioGroup);
	}

    /* radio group finden */
    if( ((WradioWidget)self)->wradio.rg == NULL ) {
        p = m_lookup_str( ((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups, ((WradioWidget)self)->wradio.radioGroup, -1 );
        if( p >= 0 )
		{
			((WradioWidget)self)->wradio.rg = mls( ((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups, p );
		}
        else
        {   /* radio group anlegen ? */
            ((WradioWidget)self)->wradio.rg = m_add(((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups);
            ((WradioWidget)self)->wradio.rg->name = strdup( ((WradioWidget)self)->wradio.radioGroup );
            ((WradioWidget)self)->wradio.rg->active  = self;
            ((WradioWidget)self)->wradio.active = True;
        }
    }

    if( ((WradioWidget)self)->wradio.rg->active == 0 ) ((WradioWidget)self)->wradio.rg->active  = self;
    return ((WradioWidget)self)->wradio.rg->active;
}
#line 310 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 310 "Wradio.widget"
static Widget  rgroups_get_active_widget(Widget self)
#else
#line 310 "Wradio.widget"
static Widget  rgroups_get_active_widget(self)Widget self;
#endif
#line 311 "Wradio.widget"
{
	//might be reallocated, so we need to update the ptr
	int p = m_lookup_str( ((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups, ((WradioWidget)self)->wradio.radioGroup, -1 );
    if(p >= 0)
		((WradioWidget)self)->wradio.rg = mls( ((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups, p );
    else
		((WradioWidget)self)->wradio.rg = 0;
    if(! ((WradioWidget)self)->wradio.rg ) ERR("Widget %s is not registered in any radio group", ((WradioWidget)self)->core.name );
    return ( ((WradioWidget)self)->wradio.rg->active );
}
#line 322 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 322 "Wradio.widget"
static void  rgroups_set_active_widget(Widget self)
#else
#line 322 "Wradio.widget"
static void  rgroups_set_active_widget(self)Widget self;
#endif
#line 323 "Wradio.widget"
{
	int p = m_lookup_str( ((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups, ((WradioWidget)self)->wradio.radioGroup, -1 );
    if(p >= 0)
		((WradioWidget)self)->wradio.rg = mls( ((WradioWidgetClass)self->core.widget_class)->wradio_class.rgroups, p );
    else
		((WradioWidget)self)->wradio.rg = 0;
    if(! ((WradioWidget)self)->wradio.rg ) ERR("Widget %s is not registered in any radio group", ((WradioWidget)self)->core.name );
    ((WradioWidget)self)->wradio.rg->active = self;
}
#line 334 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 334 "Wradio.widget"
static pix_t * load_pixmap(Widget self,char * s)
#else
#line 334 "Wradio.widget"
static pix_t * load_pixmap(self,s)Widget self;char * s;
#endif
#line 335 "Wradio.widget"
{
	pix_t *p = calloc( 1,sizeof( pix_t ));
	if( load_pix(self,s, p ) )
 	{
		free(p);
		return 0;
	}
	return p;
}
#line 346 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 346 "Wradio.widget"
static void unload_pixmap(Widget self,pix_t * p)
#else
#line 346 "Wradio.widget"
static void unload_pixmap(self,p)Widget self;pix_t * p;
#endif
#line 347 "Wradio.widget"
{
	XFreePixmap( XtDisplay(self), p->map );
	XFreePixmap( XtDisplay(self), p->mask );
	free( p );
}
#line 355 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 355 "Wradio.widget"
static int  load_pix(Widget self,char * name,pix_t * p)
#else
#line 355 "Wradio.widget"
static int  load_pix(self,name,p)Widget self;char * name;pix_t * p;
#endif
#line 356 "Wradio.widget"
{
  Display *dpy = XtDisplay(self);
  unsigned int width, height, bw, depth;
  Window win;
  int err,x,y;

  if( load_pixmap_from_file(self, name, & p->map, & p->mask) )
    return -1;

  if (! XGetGeometry(dpy, p->map, &win, &x, &y, &width, &height, &bw, &depth))
    return -1;

  /* printf("loading success %s\n", name ); */
  p->fileName = name;
  p->pm_rect.width  = (unsigned short) width;
  p->pm_rect.height = (unsigned short) height;
  p->pm_depth = depth;
  return 0;
}

static XtResource resources[] = {
#line 12 "Wradio.widget"
{XtNlabel,XtCLabel,XtRString,sizeof(((WradioRec*)NULL)->wradio.label),XtOffsetOf(WradioRec,wradio.label),XtRString,(XtPointer)NULL },
#line 13 "Wradio.widget"
{XtNcornerRoundPercent,XtCCornerRoundPercent,XtRInt,sizeof(((WradioRec*)NULL)->wradio.cornerRoundPercent),XtOffsetOf(WradioRec,wradio.cornerRoundPercent),XtRImmediate,(XtPointer)0 },
#line 14 "Wradio.widget"
{XtNdraw_override,XtCDraw_override,XtRXTCallbackProc,sizeof(((WradioRec*)NULL)->wradio.draw_override),XtOffsetOf(WradioRec,wradio.draw_override),XtRImmediate,(XtPointer)NULL },
#line 15 "Wradio.widget"
{XtNinnerBorderPercent,XtCInnerBorderPercent,XtRInt,sizeof(((WradioRec*)NULL)->wradio.innerBorderPercent),XtOffsetOf(WradioRec,wradio.innerBorderPercent),XtRImmediate,(XtPointer)0 },
#line 16 "Wradio.widget"
{XtNbackground_set,XtCBackground_set,XtRPixel,sizeof(((WradioRec*)NULL)->wradio.background_set),XtOffsetOf(WradioRec,wradio.background_set),XtRString,(XtPointer)"Darkgrey"},
#line 17 "Wradio.widget"
{XtNborderColAct,XtCBorderColAct,XtRPixel,sizeof(((WradioRec*)NULL)->wradio.borderColAct),XtOffsetOf(WradioRec,wradio.borderColAct),XtRString,(XtPointer)"Green"},
#line 18 "Wradio.widget"
{XtNborderColNorm,XtCBorderColNorm,XtRPixel,sizeof(((WradioRec*)NULL)->wradio.borderColNorm),XtOffsetOf(WradioRec,wradio.borderColNorm),XtRString,(XtPointer)"Darkgrey"},
#line 19 "Wradio.widget"
{XtNpixmapNames,XtCPixmapNames,XtRString,sizeof(((WradioRec*)NULL)->wradio.pixmapNames),XtOffsetOf(WradioRec,wradio.pixmapNames),XtRString,(XtPointer)NULL },
#line 20 "Wradio.widget"
{XtNradioGroup,XtCRadioGroup,XtRString,sizeof(((WradioRec*)NULL)->wradio.radioGroup),XtOffsetOf(WradioRec,wradio.radioGroup),XtRImmediate,(XtPointer)NULL },
#line 21 "Wradio.widget"
{XtNradioData,XtCRadioData,XtRXTPointer,sizeof(((WradioRec*)NULL)->wradio.radioData),XtOffsetOf(WradioRec,wradio.radioData),XtRImmediate,(XtPointer)NULL },
#line 22 "Wradio.widget"
{XtNactive,XtCActive,XtRInt,sizeof(((WradioRec*)NULL)->wradio.active),XtOffsetOf(WradioRec,wradio.active),XtRImmediate,(XtPointer)0 },
};

WradioClassRec wradioClassRec = {
{ /* core_class part */
/* superclass   	*/  (WidgetClass) &wheelClassRec,
/* class_name   	*/  "Wradio",
/* widget_size  	*/  sizeof(WradioRec),
/* class_initialize 	*/  class_initialize,
/* class_part_initialize*/  _resolve_inheritance,
/* class_inited 	*/  FALSE,
/* initialize   	*/  initialize,
/* initialize_hook 	*/  NULL,
/* realize      	*/  realize,
/* actions      	*/  actionsList,
/* num_actions  	*/  6,
/* resources    	*/  resources,
/* num_resources 	*/  11,
/* xrm_class    	*/  NULLQUARK,
/* compres_motion 	*/  False ,
/* compress_exposure 	*/  FALSE ,
/* compress_enterleave 	*/  False ,
/* visible_interest 	*/  False ,
/* destroy      	*/  destroy,
/* resize       	*/  resize,
/* expose       	*/  expose,
/* set_values   	*/  set_values,
/* set_values_hook 	*/  NULL,
/* set_values_almost 	*/  XtInheritSetValuesAlmost,
/* get_values+hook 	*/  NULL,
/* accept_focus 	*/  XtInheritAcceptFocus,
/* version      	*/  XtVersion,
/* callback_private 	*/  NULL,
/* tm_table      	*/  defaultTranslations,
/* query_geometry 	*/  XtInheritQueryGeometry,
/* display_acceleator 	*/  XtInheritDisplayAccelerator,
/* extension    	*/  NULL 
},
{ /* Wheel_class part */
exec_command,
XtInherit_sig_recv,
},
{ /* Wradio_class part */
/* rgroups */  0 ,
},
};
WidgetClass wradioWidgetClass = (WidgetClass) &wradioClassRec;
/*ARGSUSED*/
#line 382 "Wradio.widget"
static void highlight(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
  if( ((WradioWidget)self)->wheel.state == STATE_SELECTED ) return;
  ((WradioWidget)self)->wheel.state = STATE_SELECTED;
  ((WradioWidgetClass)self->core.widget_class)->core_class.expose(self,NULL,NULL);
}

/*ARGSUSED*/
#line 389 "Wradio.widget"
static void reset(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
  if( ((WradioWidget)self)->wheel.state == STATE_NORMAL ) return;
  ((WradioWidget)self)->wheel.state = STATE_NORMAL;
  ((WradioWidgetClass)self->core.widget_class)->core_class.expose(self,NULL,NULL);
}

/*ARGSUSED*/
#line 396 "Wradio.widget"
static void unset(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
    ((WradioWidget)self)->wradio.active = 0;
    ((WradioWidgetClass)self->core.widget_class)->core_class.expose(self, NULL,NULL );
}

/*ARGSUSED*/
#line 402 "Wradio.widget"
static void set(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
    ((WradioWidget)self)->wradio.active = 1;
    Widget w = rgroups_get_active_widget(self);
    if( w && w != self ) unset(w, 0,0,0 );
    rgroups_set_active_widget(self);
    ((WradioWidgetClass)self->core.widget_class)->core_class.expose(self, NULL,NULL );
}

/*ARGSUSED*/
#line 411 "Wradio.widget"
static void toggle(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
   if( ((WradioWidget)self)->wradio.active ) unset(self,0,0,0); else set(self,0,0,0);
}

/*ARGSUSED*/
#line 416 "Wradio.widget"
static void notify(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
  XtCallCallbackList( self, ((WradioWidget)self)->wheel.callback, event );
}

static void _resolve_inheritance(class)
WidgetClass class;
{
  WradioWidgetClass c __attribute__((unused)) = (WradioWidgetClass) class;
  WradioWidgetClass super __attribute__((unused));
  if (class == wradioWidgetClass) return;
  super = (WradioWidgetClass)class->core_class.superclass;
}
#line 71 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 71 "Wradio.widget"
static void class_initialize(void)
#else
#line 71 "Wradio.widget"
static void class_initialize()
#endif
#line 72 "Wradio.widget"
{
        converters_init();
}
#line 75 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 75 "Wradio.widget"
static void initialize(Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 75 "Wradio.widget"
static void initialize(request,self,args,num_args)Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 76 "Wradio.widget"
{
  Display *dpy = XtDisplay(self);
  char *s = ((WradioWidget)self)->wradio.label;
  int w=10,h=10;

  /* init classvar
     wbuild |$| does not work for class_initialize
  */


  ((WradioWidget)self)->wradio.pix=0;
  if( ((WradioWidget)self)->wradio.pixmapNames ) ((WradioWidget)self)->wradio.pix = load_pixmap(self, ((WradioWidget)self)->wradio.pixmapNames );
  if( ! s || ! *s )
    s=((WradioWidget)self)->core.name;
  ((WradioWidget)self)->wradio.label = XtNewString(s);

  /* breite und hÃ¶he der Pixmap, falls vorhanden */

  xft_calc_string_size( self, ((WradioWidget)self)->wheel.xftFont, s, &((WradioWidget)self)->wradio.label_width, 0 );
  if( ((WradioWidget)self)->core.width == 0 ) {
      if( ((WradioWidget)self)->wradio.pix ) w = ((WradioWidget)self)->wradio.pix->pm_rect.width; else w = ((WradioWidget)self)->wradio.label_width;
      ((WradioWidget)self)->core.width = increase_by_percent( w, ((WradioWidget)self)->wradio.innerBorderPercent );
  }

  if( ((WradioWidget)self)->core.height == 0 ) {
      h = ((WradioWidget)self)->wradio.pix ? ((WradioWidget)self)->wradio.pix->pm_rect.height : ((WradioWidget)self)->wheel.xftFont->height ;
      ((WradioWidget)self)->core.height = increase_by_percent( h, ((WradioWidget)self)->wradio.innerBorderPercent);
  }

  if( ((WradioWidget)self)->wradio.draw_override == 0 )
    ((WradioWidget)self)->wradio.draw_override = default_label_draw;

    int activate_me = ((WradioWidget)self)->wradio.active;
    ((WradioWidget)self)->wradio.rg = 0;
    if(! ((WradioWidget)self)->wradio.radioGroup ) ((WradioWidget)self)->wradio.radioGroup = ((WradioWidget)self)->core.name;
    rgroup_lookup(self);

    /* wir werden aktiviert, wenn wir die gruppe erzeugen
       falls die Gruppe schon existiert hat ist
       ein anderes widget aktiv und $active wird
       auf Null gesetzt.
    */

    if( activate_me ) { set(self,0,0,0); notify(self,0,0,0); }

}
#line 123 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 123 "Wradio.widget"
static int  exec_command(Widget self,int  cmd,int  val)
#else
#line 123 "Wradio.widget"
static int  exec_command(self,cmd,val)Widget self;int  cmd;int  val;
#endif
#line 124 "Wradio.widget"
{
  if( cmd == WHEEL_FIRE && ((WradioWidget)self)->wheel.state == STATE_SELECTED ) {
      set(self,0,0,0);
      notify(self,0,0,0);
      return 1;
  }

  return 0;
}
#line 135 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 135 "Wradio.widget"
static void realize(Widget self,XtValueMask * mask,XSetWindowAttributes * attributes)
#else
#line 135 "Wradio.widget"
static void realize(self,mask,attributes)Widget self;XtValueMask * mask;XSetWindowAttributes * attributes;
#endif
#line 136 "Wradio.widget"
{
	XtCreateWindow(self, (unsigned int) InputOutput,
        		  (Visual *) CopyFromParent, *mask, attributes);
        /* this gc is Not shared and its writeable */
        ((WradioWidget)self)->wradio.pix_gc    = XCreateGC(XtDisplay(self),XtWindow(self),0,NULL );
  	reshape_widget(self);
}
#line 144 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 144 "Wradio.widget"
static void resize(Widget self)
#else
#line 144 "Wradio.widget"
static void resize(self)Widget self;
#endif
#line 145 "Wradio.widget"
{
    if (XtIsRealized(self)) reshape_widget(self);
}
#line 149 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 149 "Wradio.widget"
static void destroy(Widget self)
#else
#line 149 "Wradio.widget"
static void destroy(self)Widget self;
#endif
#line 150 "Wradio.widget"
{
  if( ((WradioWidget)self)->wradio.draw) XftDrawDestroy( ((WradioWidget)self)->wradio.draw );
  XtFree(((WradioWidget)self)->wradio.label);
  if( ((WradioWidget)self)->wradio.pix_gc ) XFreeGC(XtDisplay(self),((WradioWidget)self)->wradio.pix_gc);
  if( ((WradioWidget)self)->wradio.pix ) unload_pixmap( self, ((WradioWidget)self)->wradio.pix );
  /* what if we are radioGroup and others want reach us ? */
}
#line 160 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 160 "Wradio.widget"
static Boolean  set_values(Widget  old,Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 160 "Wradio.widget"
static Boolean  set_values(old,request,self,args,num_args)Widget  old;Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 161 "Wradio.widget"
{
  if (((WradioWidget)self)->wradio.label != ((WradioWidget)old)->wradio.label) {
    XtFree(((WradioWidget)old)->wradio.label);
    ((WradioWidget)self)->wradio.label = XtNewString(((WradioWidget)self)->wradio.label);
  }

  return True; /* redisplay widget */
}
#line 170 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 170 "Wradio.widget"
static void expose(Widget self,XEvent * event,Region  region)
#else
#line 170 "Wradio.widget"
static void expose(self,event,region)Widget self;XEvent * event;Region  region;
#endif
#line 171 "Wradio.widget"
{
  if( !XtIsRealized(self)) return;
  Display *dpy = XtDisplay(self);
  if( ! ((WradioWidget)self)->wradio.draw ) {
    ((WradioWidget)self)->wradio.draw = XftDrawCreate(dpy, XtWindow(self),
			  DefaultVisual(dpy, DefaultScreen(dpy)), None);
    if( ! ((WradioWidget)self)->wradio.draw ) error(1,0,"%s: cannot create xftdraw", ((WradioWidget)self)->core.name );
  }

  if( ((WradioWidget)self)->wradio.draw_override ) {
      ((WradioWidget)self)->wradio.draw_override( self, NULL, ((WradioWidget)self)->wradio.draw );
      return;
  }
}
#line 48 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 48 "Wradio.widget"
XtPointer  wradio_data(Widget self)
#else
#line 48 "Wradio.widget"
XtPointer  wradio_data(self)Widget self;
#endif
#line 49 "Wradio.widget"
{
        return ((WradioWidget)self)->wradio.radioData;
}
#line 53 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 53 "Wradio.widget"
XtPointer  wradio_active_data(Widget self)
#else
#line 53 "Wradio.widget"
XtPointer  wradio_active_data(self)Widget self;
#endif
#line 54 "Wradio.widget"
{
        Widget w = rgroups_get_active_widget(self);
        return w ? wradio_data(w) : NULL;
}
#line 59 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 59 "Wradio.widget"
void wradio_select(Widget self)
#else
#line 59 "Wradio.widget"
void wradio_select(self)Widget self;
#endif
#line 60 "Wradio.widget"
{
	set(self, 0,0,0 );
}
#line 64 "Wradio.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 64 "Wradio.widget"
void wradio_deselect(Widget self)
#else
#line 64 "Wradio.widget"
void wradio_deselect(self)Widget self;
#endif
#line 65 "Wradio.widget"
{
    unset(self, 0,0,0 );
}
