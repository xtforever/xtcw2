\input wbuildmac.tex
\Class{Wbutton}simple Button with Wheel Support 



\Table{Wlabel}
XtNlabel&XtCLabel&String &NULL \cr
XtNcornerRoundPercent&XtCCornerRoundPercent&Int &0 \cr
XtNdraw{\underline}override&XtCDraw{\underline}override&XTCallbackProc &NULL \cr
XtNheightIncreasePercent&XtCHeightIncreasePercent&Int &0 \cr
XtNleftOffsetPercent&XtCLeftOffsetPercent&Int &5 \cr
XtNupdate&XtCUpdate&Int &0 \cr
\endTable
\Table{Wheel}
XtNxftFont&XtCXFtFont&XftFont&"Sans-22"\cr
XtNcallback&XtCCallback&Callback&NULL \cr
XtNbg{\underline}norm&XtCBg{\underline}norm&Pixel&"lightblue"\cr
XtNbg{\underline}sel&XtCBg{\underline}sel&Pixel&"yellow"\cr
XtNbg{\underline}hi&XtCBg{\underline}hi&Pixel&"red"\cr
XtNfg{\underline}norm&XtCFg{\underline}norm&Pixel&"black"\cr
XtNfg{\underline}sel&XtCFg{\underline}sel&Pixel&"green"\cr
XtNfg{\underline}hi&XtCFg{\underline}hi&Pixel&"white"\cr
XtNuser{\underline}data&XtCUser{\underline}data&Int &0 \cr
XtNfocus{\underline}group&XtCFocus{\underline}group&String &""\cr
XtNstate&XtCState&Int &0 \cr
XtNregister{\underline}focus{\underline}group&XtCRegister{\underline}focus{\underline}group&Boolean &True \cr
\endTable
\Table{Core}
XtNx&XtCX&Position &0 \cr
XtNy&XtCY&Position &0 \cr
XtNwidth&XtCWidth&Dimension &0 \cr
XtNheight&XtCHeight&Dimension &0 \cr
borderWidth&XtCBorderWidth&Dimension &0 \cr
XtNcolormap&XtCColormap&Colormap &NULL \cr
XtNdepth&XtCDepth&Int &0 \cr
destroyCallback&XtCDestroyCallback&XTCallbackList &NULL \cr
XtNsensitive&XtCSensitive&Boolean &True \cr
XtNtm&XtCTm&XTTMRec &NULL \cr
ancestorSensitive&XtCAncestorSensitive&Boolean &False \cr
accelerators&XtCAccelerators&XTTranslations &NULL \cr
borderColor&XtCBorderColor&Pixel &0 \cr
borderPixmap&XtCBorderPixmap&Pixmap &NULL \cr
background&XtCBackground&Pixel &0 \cr
backgroundPixmap&XtCBackgroundPixmap&Pixmap &NULL \cr
mappedWhenManaged&XtCMappedWhenManaged&Boolean &True \cr
XtNscreen&XtCScreen&Screen *&NULL \cr
\endTable
\Translations
\Section
\Code
{\langle}EnterWindow{\rangle}: highlight() \endCode


\Section
\Code
{\langle}LeaveWindow{\rangle}: reset() \endCode


\Section
\Code
{\langle}BtnDown{\rangle}: notify() \endCode


\End\Actions
\Section
\Action{highlight}\Code
void highlight({\dollar}, XEvent* event, String* params, Cardinal* num{\underline}params)
{\lbrace}
  if( {\dollar}state == STATE{\underline}SELECTED ) return;
  {\dollar}state = STATE{\underline}SELECTED;
  {\dollar}expose({\dollar},NULL,NULL);
{\rbrace}\endCode


\Section
\Action{reset}\Code
void reset({\dollar}, XEvent* event, String* params, Cardinal* num{\underline}params)
{\lbrace}
  if( {\dollar}state == STATE{\underline}NORMAL ) return;
  {\dollar}state = STATE{\underline}NORMAL;
  {\dollar}expose({\dollar},NULL,NULL);
{\rbrace}\endCode


\Section
\Action{notify}\Code
void notify({\dollar}, XEvent* event, String* params, Cardinal* num{\underline}params)
{\lbrace}
  XtCallCallbackList( {\dollar}, {\dollar}callback, event );
{\rbrace}\endCode


\End\Imports
\Section
\Code
{\incl} "mls.h"\endCode


\Section
\Code
{\incl} {\langle}X11/Xft/Xft.h{\rangle}\endCode


\Section
\Code
{\incl} "converters-xft.h"\endCode


\End\Methods
\Section
\Code
initialize(Widget  request, {\dollar}, ArgList  args, Cardinal * num{\underline}args)
{\lbrace}
        TRACE(2,"Wbutton:{\percent}s focus group: {\percent}s", {\dollar}name, {\dollar}focus{\underline}group );
{\rbrace}\endCode


\Section
\Code
int  exec{\underline}command({\dollar}, int  cmd, int  val)
{\lbrace}
  Cardinal null;
  if( cmd == WHEEL{\underline}FIRE ) {\lbrace}
    if( {\dollar}state == STATE{\underline}SELECTED ) {\lbrace} notify({\dollar}, NULL,NULL, {\ampersand}null ); return 1; {\rbrace}
  {\rbrace}
  
  return 0;
{\rbrace}\endCode


\End\bye
