/* Generated by wbuild
 * (generator version 3.3)
 */
#include <X11/IntrinsicP.h>
#include <X11/StringDefs.h>
#include <xtcw/HSliderP.h>
#line 130 "HSlider.widget"
static void sl_motion(
#if NeedFunctionPrototypes
Widget,XEvent*,String*,Cardinal*
#endif
);

static XtActionsRec actionsList[] = {
{"sl_motion", sl_motion},
};

static char defaultTranslations[] = "\
<Btn1Motion>: sl_motion() \n\
<Btn1Up>: sl_motion() \n\
";
static void _resolve_inheritance(
#if NeedFunctionPrototypes
WidgetClass
#endif
);
#line 36 "HSlider.widget"
static void initialize(
#if NeedFunctionPrototypes
Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 53 "HSlider.widget"
static Boolean  set_values(
#if NeedFunctionPrototypes
Widget ,Widget ,Widget,ArgList ,Cardinal *
#endif
);
#line 62 "HSlider.widget"
static void destroy(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 68 "HSlider.widget"
static void expose(
#if NeedFunctionPrototypes
Widget,XEvent *,Region 
#endif
);
#line 78 "HSlider.widget"
static void verify_values(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 88 "HSlider.widget"
static void draw_slider(
#if NeedFunctionPrototypes
Widget
#endif
);
#line 78 "HSlider.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 78 "HSlider.widget"
static void verify_values(Widget self)
#else
#line 78 "HSlider.widget"
static void verify_values(self)Widget self;
#endif
#line 79 "HSlider.widget"
{
    if( ((HSliderWidget)self)->hSlider.frac < 0 ) ((HSliderWidget)self)->hSlider.frac = 0;
    if( ((HSliderWidget)self)->hSlider.frac > RES ) ((HSliderWidget)self)->hSlider.frac = RES;
    if( ((HSliderWidget)self)->hSlider.pos  < 0 ) ((HSliderWidget)self)->hSlider.pos  = 0;
    if( ((HSliderWidget)self)->hSlider.pos  > RES ) ((HSliderWidget)self)->hSlider.pos  = RES - ((HSliderWidget)self)->hSlider.frac;
    if( ((HSliderWidget)self)->hSlider.frac + ((HSliderWidget)self)->hSlider.pos > RES ) ((HSliderWidget)self)->hSlider.pos = RES - ((HSliderWidget)self)->hSlider.frac;
}
#line 88 "HSlider.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 88 "HSlider.widget"
static void draw_slider(Widget self)
#else
#line 88 "HSlider.widget"
static void draw_slider(self)Widget self;
#endif
#line 89 "HSlider.widget"
{
        int h,y;
        verify_values(self);

        /* calculate pixel */
        h = ((HSliderWidget)self)->core.width * ((HSliderWidget)self)->hSlider.frac / RES;
        y = ((HSliderWidget)self)->core.width * ((HSliderWidget)self)->hSlider.pos / RES;
        if( y+h > ((HSliderWidget)self)->core.width ) y = ((HSliderWidget)self)->core.width-h;

        /* check the cached position, if nothing changed return
          else overwrite old slider with background pixel
          */
        if( ((HSliderWidget)self)->hSlider.sly >= 0) {
            if( ((HSliderWidget)self)->hSlider.sly == y && ((HSliderWidget)self)->hSlider.slh == h ) return;
            XFillRectangle(XtDisplay(self), XtWindow(self),((HSliderWidget)self)->hSlider.gc_background,
                             ((HSliderWidget)self)->hSlider.sly,0, ((HSliderWidget)self)->hSlider.slh, ((HSliderWidget)self)->core.height );
        }

        /* update the cached slider position and draw a rectangle for the slider
          using the foreground pixel
          */
        ((HSliderWidget)self)->hSlider.sly = y; ((HSliderWidget)self)->hSlider.slh = h;
        XFillRectangle(XtDisplay(self), XtWindow(self),((HSliderWidget)self)->hSlider.gc_fg,
                             ((HSliderWidget)self)->hSlider.sly,0, ((HSliderWidget)self)->hSlider.slh, ((HSliderWidget)self)->core.height );
}

static XtResource resources[] = {
#line 5 "HSlider.widget"
{XtNforeground,XtCForeground,XtRPixel,sizeof(((HSliderRec*)NULL)->hSlider.foreground),XtOffsetOf(HSliderRec,hSlider.foreground),XtRImmediate,(XtPointer)XtDefaultForeground },
#line 6 "HSlider.widget"
{XtNlineWidth,XtCLineWidth,XtRInt,sizeof(((HSliderRec*)NULL)->hSlider.lineWidth),XtOffsetOf(HSliderRec,hSlider.lineWidth),XtRImmediate,(XtPointer)1 },
#line 7 "HSlider.widget"
{XtNfilled,XtCFilled,XtRBoolean,sizeof(((HSliderRec*)NULL)->hSlider.filled),XtOffsetOf(HSliderRec,hSlider.filled),XtRImmediate,(XtPointer)False },
#line 9 "HSlider.widget"
{XtNfrac,XtCFrac,XtRUint,sizeof(((HSliderRec*)NULL)->hSlider.frac),XtOffsetOf(HSliderRec,hSlider.frac),XtRImmediate,(XtPointer)200000 },
#line 11 "HSlider.widget"
{XtNpos,XtCPos,XtRUint,sizeof(((HSliderRec*)NULL)->hSlider.pos),XtOffsetOf(HSliderRec,hSlider.pos),XtRImmediate,(XtPointer)100000 },
#line 13 "HSlider.widget"
{XtNcallback,XtCCallback,XtRCallback,sizeof(((HSliderRec*)NULL)->hSlider.callback),XtOffsetOf(HSliderRec,hSlider.callback),XtRImmediate,(XtPointer)NULL },
};

HSliderClassRec hSliderClassRec = {
{ /* core_class part */
/* superclass   	*/  (WidgetClass) &coreClassRec,
/* class_name   	*/  "HSlider",
/* widget_size  	*/  sizeof(HSliderRec),
/* class_initialize 	*/  NULL,
/* class_part_initialize*/  _resolve_inheritance,
/* class_inited 	*/  FALSE,
/* initialize   	*/  initialize,
/* initialize_hook 	*/  NULL,
/* realize      	*/  XtInheritRealize,
/* actions      	*/  actionsList,
/* num_actions  	*/  1,
/* resources    	*/  resources,
/* num_resources 	*/  6,
/* xrm_class    	*/  NULLQUARK,
/* compres_motion 	*/  False ,
/* compress_exposure 	*/  FALSE ,
/* compress_enterleave 	*/  False ,
/* visible_interest 	*/  False ,
/* destroy      	*/  destroy,
/* resize       	*/  XtInheritResize,
/* expose       	*/  expose,
/* set_values   	*/  set_values,
/* set_values_hook 	*/  NULL,
/* set_values_almost 	*/  XtInheritSetValuesAlmost,
/* get_values+hook 	*/  NULL,
/* accept_focus 	*/  XtInheritAcceptFocus,
/* version      	*/  XtVersion,
/* callback_private 	*/  NULL,
/* tm_table      	*/  defaultTranslations,
/* query_geometry 	*/  XtInheritQueryGeometry,
/* display_acceleator 	*/  XtInheritDisplayAccelerator,
/* extension    	*/  NULL 
},
{ /* HSlider_class part */
 /* dummy */  0
},
};
WidgetClass hSliderWidgetClass = (WidgetClass) &hSliderClassRec;
/*ARGSUSED*/
#line 130 "HSlider.widget"
static void sl_motion(self,event,params,num_params)Widget self;XEvent*event;String*params;Cardinal*num_params;
{
    int y = event->xbutton.x;
    int slider_len  = ((HSliderWidget)self)->core.width * ((HSliderWidget)self)->hSlider.frac / RES;
    y = y - (slider_len /2);
    if( y < 0 ) y=0;
    
    int p =  (y *RES / ((HSliderWidget)self)->core.width);
    if( ((HSliderWidget)self)->hSlider.pos == p ) return; /* caching */
    
    ((HSliderWidget)self)->hSlider.pos = p;
    draw_slider(self);
    XtCallCallbackList( self, ((HSliderWidget)self)->hSlider.callback, (XtPointer) (intptr_t) ((HSliderWidget)self)->hSlider.pos );
}

static void _resolve_inheritance(class)
WidgetClass class;
{
  HSliderWidgetClass c __attribute__((unused)) = (HSliderWidgetClass) class;
  HSliderWidgetClass super __attribute__((unused));
  if (class == hSliderWidgetClass) return;
  super = (HSliderWidgetClass)class->core_class.superclass;
}
#line 36 "HSlider.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 36 "HSlider.widget"
static void initialize(Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 36 "HSlider.widget"
static void initialize(request,self,args,num_args)Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 37 "HSlider.widget"
{
  XTFUNC();
  XGCValues     values = {
  		foreground: ((HSliderWidget)self)->core.background_pixel,
  		graphics_exposures: False,
                line_width: ((HSliderWidget)self)->hSlider.lineWidth };
  uint          mask = GCForeground | GCGraphicsExposures |  GCLineWidth;
  ((HSliderWidget)self)->hSlider.gc_background = XtGetGC(self, mask, &values);
  values.foreground = ((HSliderWidget)self)->hSlider.foreground;
  ((HSliderWidget)self)->hSlider.gc_fg = XtGetGC(self,mask,&values);
  TRACE(9, "slider values pos=%u frac=%u", ((HSliderWidget)self)->hSlider.pos, ((HSliderWidget)self)->hSlider.frac );
  if( ((HSliderWidget)self)->core.width == 0 ) ((HSliderWidget)self)->core.width=10;
  if( ((HSliderWidget)self)->core.height == 0 ) ((HSliderWidget)self)->core.height=10;
  ((HSliderWidget)self)->hSlider.sly = -1;
}
#line 53 "HSlider.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 53 "HSlider.widget"
static Boolean  set_values(Widget  old,Widget  request,Widget self,ArgList  args,Cardinal * num_args)
#else
#line 53 "HSlider.widget"
static Boolean  set_values(old,request,self,args,num_args)Widget  old;Widget  request;Widget self;ArgList  args;Cardinal * num_args;
#endif
#line 54 "HSlider.widget"
{
  	

  if( ((HSliderWidget)old)->hSlider.pos != ((HSliderWidget)self)->hSlider.pos ||
     ((HSliderWidget)old)->hSlider.frac != ((HSliderWidget)self)->hSlider.frac ) return True;
  return False;
}
#line 62 "HSlider.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 62 "HSlider.widget"
static void destroy(Widget self)
#else
#line 62 "HSlider.widget"
static void destroy(self)Widget self;
#endif
#line 63 "HSlider.widget"
{
  if( ((HSliderWidget)self)->hSlider.gc_background ) XtReleaseGC(self,((HSliderWidget)self)->hSlider.gc_background);
  if( ((HSliderWidget)self)->hSlider.gc_fg ) XtReleaseGC(self,((HSliderWidget)self)->hSlider.gc_fg);
}
#line 68 "HSlider.widget"
/*ARGSUSED*/
#if NeedFunctionPrototypes
#line 68 "HSlider.widget"
static void expose(Widget self,XEvent * event,Region  region)
#else
#line 68 "HSlider.widget"
static void expose(self,event,region)Widget self;XEvent * event;Region  region;
#endif
#line 69 "HSlider.widget"
{
  XTFUNC();
  XClearWindow( XtDisplay(self), XtWindow(self) );
  ((HSliderWidget)self)->hSlider.sly = -1; /* invalidate the cache */
  draw_slider(self);
}
#line 147 "HSlider.widget"
#line 148 "HSlider.widget"
